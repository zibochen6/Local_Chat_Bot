# 智能语音对话机器人使用指南

## 🎯 功能概述

这是一个基于 sherpa-ncnn 的智能语音对话机器人，具备：
- **唤醒词检测**: 说"你好"激活对话
- **连续语音识别**: 自动拼接完整句子
- **智能结束检测**: 静默5秒或说结束词自动结束

## 🚀 启动方法

```bash
cd /home/seeed/Local_Chat_Bot
source /home/seeed/miniforge3/etc/profile.d/conda.sh
conda activate chat
python audio_to_txt.py
```

## 💡 使用技巧

### 📢 说话建议
1. **清晰发音**: 吐字清晰，语速适中
2. **合适音量**: 不要太大声或太小声
3. **靠近麦克风**: 保持合适距离，减少环境噪音
4. **完整句子**: 尽量说完整的句子，比如"今天星期几？"

### 🎙️ 操作流程
1. **等待唤醒**: 看到"🔄 监听唤醒词中..." 
2. **说唤醒词**: 清楚地说"你好"
3. **开始对话**: 看到"👂 开始倾听您的问题..."
4. **说问题**: 连续说出完整问题
5. **等待结束**: 停止说话5秒后自动结束，或说"谢谢"

### ⚡ 快速结束词
说以下任意词语可立即结束对话：
- "谢谢" | "再见" | "好的" 
- "知道了" | "明白了" | "完毕"
- "结束" | "没了" | "就这样"

## 🔧 优化参数

### 音频阈值
- **唤醒检测**: 音频电平 > 0.02
- **对话检测**: 音频电平 > 0.02  
- **最小音频长度**: 1秒 (16000 采样点)

### 时间设置
- **静默检测**: 连续5秒静默结束对话
- **音频片段**: 每1秒处理一次
- **最小对话**: 至少2段音频才处理

## 🎯 识别质量提升

### 环境要求
1. **安静环境**: 减少背景噪音
2. **稳定网络**: 如果使用网络模型
3. **正常音量**: 避免过大或过小声音

### 硬件建议
1. **USB麦克风**: 使用质量好的麦克风
2. **近距离**: 距离麦克风20-50cm
3. **稳定供电**: 确保设备电源稳定

## 🔍 调试信息

运行时显示的符号含义：
- `🎵`: 检测到音频信号，正在录音
- `.`: 静默状态
- `📊`: 显示音频处理信息
- `🗣️`: 成功识别到文本
- `🔇`: 音频无法识别

## ❓ 常见问题

### Q: 识别效果不好怎么办？
A: 
1. 检查麦克风是否工作正常
2. 尝试更清晰地发音
3. 调整与麦克风的距离
4. 确保环境相对安静

### Q: 唤醒词检测不灵敏？
A:
1. 清楚地说"你好"
2. 确保音量适中
3. 等待系统显示"🔄 监听唤醒词中..."

### Q: 对话不能正常结束？
A:
1. 保持静默5秒
2. 或明确说"谢谢"、"再见"等结束词
3. 使用 Ctrl+C 强制退出

## 🎉 下一步扩展

可以在 `end_conversation()` 函数中添加：
1. **AI回答**: 接入 ChatGPT 等模型
2. **指令执行**: 根据语音执行系统操作  
3. **数据存储**: 保存对话历史
4. **语音合成**: 添加语音回复功能
